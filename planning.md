# リアル Buckshot Roulette プロジェクト計画書

このドキュメントは「リアル Buckshot Roulette」プロジェクトの概要、仕様、役割分担、およびタスクをまとめたものです。プロジェクトメンバーは常に最新の状態を確認し、編集・更新してください。

---

## 1. プロジェクト基本情報

### タイムライン

| マイルストーン       | 時期               |
| :------------------- | :----------------- |
| **開発開始**         | 2025 年 7 月上旬   |
| **プロトタイプ完成** | 2025 年 11 月まで  |
| **システム完成**     | 2026 年 4 月末まで |
| **本番イベント**     | 2026 年 5 月上旬   |

### 目標

- **中間目標**: 2025 年 11 月までに主要機能（ショットガンの動作検知、RFID によるアイテム検知、虫眼鏡ギミック等）のプロトタイプを確立し、実現可能性を明確に示します。
- **最終目標**: 2026 年 4 月末までにシステム全体を完成させ、5 月のイベントで安定したゲーム体験を提供します。

---

## 2. ゲームルールと演出

### 基本コンセプト

ビデオゲーム『Buckshot Roulette』を、安全性を完全に確保した物理的な体験として再現します。プレイヤーはショットガンを模したデバイスを使用し、ロシアンルーレット形式の対戦を行います。

### ショットガン

各テーブルに 1 丁設置する、本プロジェクトのコアとなるデバイスです。

- **弾の管理**: 弾（実弾/空砲）の装填は物理的な機構とシステムで連動して管理します。
- **動作検知**: トリガーを引く動作をマイクロスイッチで検知します。
- **フィードバック**: 発射音と振動によるフィードバックを行います。実弾と空砲で演出を変化させます。
- **命中判定**: 九軸センサーで銃口の向き（相手/自分）を検知し、システムが命中判定を行います。

### ライフシステム

プレイヤーごとのライフポイントは、メイン PC と連携するプレイヤー用タブレットでリアルタイムに表示・管理します。

### アイテム

ゲームを有利に進めるための 5 種類のアイテムを用意します。

- **アイテム一覧**:
  - **タバコ**: ライフを 1 回復する。
  - **拡大鏡**: 次の弾が実弾か空砲かを確認できる。
  - **手錠**: 相手のターンを 1 回スキップさせる。
  - **鋸**: ショットガンのダメージを 2 倍にする。
  - **ビール**: 現在装填されている弾を 1 発排出する。
- **使用検知**:
  - アイテムの使用は、ショットガン本体に設置した**RFID リーダー**で自動検知します。
  - 各アイテム小道具には**安価な RFID タグ**を埋め込み、複雑な電子部品は搭載しません。

### 【特殊演出】虫眼鏡ギミック

拡大鏡を使用した際に**「覗いているプレイヤーにだけ、弾の種類が見える」**演出を、光の偏光を利用して実現します。

1.  **ショットガン側**: 内部に「**白色 LED** → **偏光板 A（垂直）** → **実弾表示マーク** → **偏光板 B（水平）**」の順で配置します。これにより、肉眼ではマークが見えません。
2.  **虫眼鏡側**: レンズ部分に**偏光板 C（斜め 45 度）**を貼り付けます。
3.  **仕組み**: プレイヤーがこの虫眼鏡を通してショットガン内部を覗くと、光の偏光が変化し、肉眼では見えなかった「実弾」マークが視認できるようになります。

---

## 3. システム構成

### 全体構成

- **メイン PC (ゲームマスター)** <== **(ESP-NOW)** ==> **ショットガン (ESP32)**
- **メイン PC (ゲームマスター)** <== **(Wi-Fi)** ==> **プレイヤー用タブレット**
- **ショットガン (RFID リーダー)** <== **(RFID)** ==> **アイテム小道具 (RFID タグ)**

### 各コンポーネント詳細

- **メイン PC（ゲームマスター）**
  - **役割**: ゲームロジックの中枢、デバイス間通信のハブ。
  - **機能**: ディーラー用 UI、ゲームデータ管理（SQLite）。
- **ショットガン**
  - **頭脳**: **ESP32**マイコン。
  - **センサー/アクチュエータ**:
    - **RFID リーダー (MFRC522)**: アイテム使用検知用。
    - 九軸センサー (MPU-6050 など): 銃口の向き検知用。
    - 振動モーター、小型スピーカー: フィードバック用。
    - マイクロスイッチ: トリガー検知用。
  - **通信**: メイン PC とは**ESP-NOW**で通信。
  - **特殊ギミック**: 虫眼鏡演出用の LED と偏光板 A/B を内蔵。
- **プレイヤー用タブレット**
  - **役割**: プレイヤーへの情報表示。
  - **表示内容**: ライフ、所持アイテム、ゲームメッセージなど。
  - **通信**: メイン PC とは**Wi-Fi**で通信。
- **アイテム小道具**
  - 各小道具に**RFID タグ**を埋め込みます。
- **虫眼鏡**
  - レンズに**偏光板 C**を貼り付けます。
- **ウェブサイト**
  - **目的**: イベントの告知と情報提供。
  - **機能**: イベント終了後、配布された ID で自分の戦績を閲覧できる機能を実装します。

---

## 4. 役割分担

| 役割                       | 主な担当業務                                                                        | 担当者 |
| :------------------------- | :---------------------------------------------------------------------------------- | :----- |
| **プロジェクトリーダー**   | プロジェクト統括、進捗・予算管理、意思決定                                          | (未定) |
| **ショットガン担当**       | 電子部品選定・調達、回路設計、ESP32 ファームウェア開発、虫眼鏡ギミック実装          | (未定) |
| **システム担当**           | メイン PC アプリ開発、ディーラー UI、タブレットアプリ開発、通信プロトコル設計・実装 | (未定) |
| **HP 担当**                | Web サイト企画・デザイン・コーディング、結果表示機能のフロントエンド開発            | (未定) |
| **装飾担当**               | アイテム小道具の製作、RFID/偏光板の組み込み、会場装飾、設営・撤収協力               | (未定) |
| **資材調達・在庫管理担当** | (追加検討中) 部品・材料の発注、在庫管理、納品確認                                   | (未定) |

---

## 5. ToDo リスト（2025 年 7 月上旬開始）

- [ ] 役割分担の確定と担当者の決定
- [ ] コア技術部品の最終選定と発注
  - [ ] ESP32 開発ボード (複数台)
  - [ ] RFID リーダー (MFRC522) とテスト用 RFID タグ
  - [ ] 偏光板シート (複数枚)
  - [ ] 九軸センサー (MPU-6050 など)
- [ ] メイン PC と開発環境のセットアップ
- [ ] コミュニケーション体制の確立 (定例ミーティングの日時設定、チャットツールの準備など)
- [ ] 11 月の中間目標に向けたプロトタイプの詳細な目標共有と準備開始
